\documentclass[aspectratio=169]{beamer}

\input{styleMBM.tex}

\begin{document}

\begin{frame}<1-8>[label = EXframe]{Expected frequency of altruists in the population}
\begin{center}
\begin{tikzpicture}[node distance = 0.2cm and 0.16cm, anchor = base, baseline = 0pt]
% vertical and horizontal
\tikzstyle{math}=[font=\large, inner sep = 0pt, draw = none, minimum height = 1.2cm]

\def \blsk {-1em}

\node[math, anchor = west] (EX) at(0,0){$\mathbb{E}[\overline{X}]$};
\node[math, right = of EX] (equal){$=$};
\node[math, right = of equal](nu){$\nu$};
\node[math, right = of nu](plus){$+$};
\node[math, right = of plus](sel){$\selstr$};
\node[math, right = of sel](nuvar){$\nu (1-\nu)$};
\node[math, right = of nuvar](fac){$\dfrac{1-\mu}{\mu}$};
\node[math, right = of fac](fact){$\left(1 - \Qout \right)$};
\node[math, right = of fact]{$\times$};
\node[math, below = of plus] (blocCD){$-\cc$};
\node[math, left = of blocCD]{$\Bigg($};
\node[math, right = of blocCD] (blocCI){$- \, (\bb - \cc) \left( \dfrac{(1-m)^2}{\demesize} + \dfrac{m^2}{\demesize \, (\nbdemes - 1)} \right)$};
\node[math, below = of blocCD.south west, anchor = north west](pluss){$+$};
\node[math, right = of pluss](R){$ \dfrac{\Qin - \Qout}{1 - \Qout}$};
\node[math, right = of R](lbrace){$\Bigg[$};
\node[math, right = of lbrace](blocBD){$\bb$};
\node[math, right = of blocBD](blocBI){$- \, (\bb-\cc) \, (n-1) \, \left( \dfrac{(1-m)^2}{\demesize} + \dfrac{m^2}{\demesize \, (\nbdemes - 1)} \right)$};
\node[math, right = of blocBI](rbrace){$\Bigg]$};
\node[math, right = of rbrace]{$\Bigg)$};

\tikzstyle{highlgt}=[rectangle, rounded corners = 2pt, line width = 1pt, fill opacity = 0.4, text height = 0.5cm, fill = maincol, draw = none, inner sep = 0.5pt]
\tikzstyle{explain}=[font=\normalsize, color = maincol, anchor = north west, align = left, inner sep = 1pt, font = \small]
\tikzstyle{lnk}=[draw = maincol, line width = 1.5pt]


\begin{scope}[on background layer]

\pause

\node[highlgt, fit = (nu)](hnu){};
\node[explain] at (0, 2) (enu){Mutation-drift\\equilibrium};
\path[lnk](hnu.north)--(enu);

\pause

\node[highlgt, fit = (sel)](hsel){};
\node[explain] at(2, 1.65)(esel){Selection\\strength};
\path[lnk](hsel.north)--(esel);

\pause

\node[highlgt, fit = (nuvar)](hnuvar){};
\node[explain] at(4, 2)(enuvar){Variance in the state of one site};
\path[lnk](hnuvar.north)--(enuvar);

\pause

\node[highlgt, fit = (blocCD)(blocCI), fill = col1](hC){};
\tikzstyle{explainH}=[explain, font=\LARGE, anchor = center]
\node[explainH, right = of hC, color = col1]{$-\mathcal{C} \uncover<11->{\nearrow}$};

\pause

\node[highlgt, fit =(blocBD)(blocBI), fill = col2](hB){};
\node[explainH, below = of hB, color = col2]{$\mathcal{B} \uncover<11->{\nearrow}$};

\pause

\node[highlgt, fit = (R), fill = col3](hR){};
\node[explainH, below = of hR, color = col3]{$R \uncover<9->{\searrow}$};

\uncover<12->{
\node[highlgt, fit = (fact), fill = maincol](ht){};
\node[explainH, above = of ht, color = maincol]{$\searrow$};
}

\end{scope}

\uncover<8,9>{
\tikzstyle{blind}=[rectangle, fill = bgcol, fill opacity = 0.9, inner sep = 0pt, rounded corners = 2pt]

\node[blind, fit = (blocBI)]{};
\node[blind, fit = (blocCI)]{};

\node[anchor=center]at(blocBI){\includegraphics[height=2em]{../Pics/sword}};
\node[anchor=center]at(blocCI){\includegraphics[height=2em]{../Pics/sword}};
}

\end{tikzpicture}
\end{center}

\uncover<9>{\phantom{{\Huge X}}}
\end{frame}

\begin{frame}

\end{frame}
\end{document}
