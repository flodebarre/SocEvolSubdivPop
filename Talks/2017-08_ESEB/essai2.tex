\documentclass[aspectratio=169]{beamer}

\input{styleESEB.tex}

\begin{document}
\begin{frame}{Subdivided population -- Island model}

$\nbdemes$ demes \uncover<2->{of $\demesize$ individuals each (total population size $N = \demesize \,\nbdemes$)}
\begin{center}

\begin{tikzpicture}
\tikzstyle{bigpop}=[circle, line width = 0.7pt, draw = none, fill = maincol!40, minimum width = 2.75cm]

\node[bigpop]at(0,0)(p4){};
\node[bigpop]at(2.5,2)(p3){};
\node[bigpop]at(2.5,-2)(p2){};
\node[bigpop]at(5,0)(p1){};
\node[bigpop]at(7.5,2)(p5){};
\node[bigpop]at(7.5,-2)(p6){};
\node[bigpop]at(10,0)(p7){};

\uncover<2->{
\def \wsmall {0.7cm}
\tikzstyle{site}=[circle, line width = 1.5pt, draw = maincol, fill=bgcol, minimum width = \wsmall]

\def \rad {0.85cm}
\foreach \i in {1,...,7}{
\foreach \j in {1,...,3}{
\node[site] at ($(p\i) + (90+\j * 120:\rad)$) (p\i\j){};
}
\node[site] at (p\i) (p\i4){};
}

% Philopatry
\uncover<3->{
\path (p1) edge [loop above, ->, looseness = 5, line width = 4pt, font = \large] node [above]{$1-m$} (p1);
}

% Dispersal
\uncover<4->{
\foreach \i in {2,...,7}{
\path[line width =1.5pt, ->, draw](p1)--(p\i);
}
\node[align = center, below = 0cm of p1, text width = 3cm, font = \large]{$m$\\Emigration probability};
}

\uncover<5->{
\tikzstyle{focusing}=[circle, minimum width = \wsmall, fill opacity = 0.8]
\node[focusing, fill = mgray] at (p14){};

\node[anchor = north , draw, align = center, font = {\bf\large}]at(10, -1.75){\color{mgray}focal \\ {\uncover<6->{\color{col1} in}} \\ {\uncover<7->{ \color{col2} out}}};

}

\uncover<6->{
\foreach \i in {1,...,3}{
\node[focusing, fill = col1] at (p1\i){};
}
}

\uncover<7->{
\foreach \i in {2,...,7}{
\foreach \j in {1,...,4}{
\node[focusing, fill = col2] at (p\i\j){};
}}
}



% Add ducks
\foreach \i in {1,...,7}{
\foreach \j in {1,...,4}{
\node[]at(p\i\j) {\includegraphics[height = 0.6cm]{Pics/type0.pdf}};
}}

% Add presents
\uncover<8->{
\foreach \i in {1,...,7}{
\foreach \j in {1,...,3}{
\node[]at($(p\i) + (30+ 120*\j:0.75cm)$){\includegraphics[height = 0.5cm]{Pics/gift.pdf}};
}}
}


}
\end{tikzpicture}
\end{center}

\end{frame}

\end{document}